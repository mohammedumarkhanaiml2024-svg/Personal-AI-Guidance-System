<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal AI Guidance System - Dark Edition</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'float': 'float 3s ease-in-out infinite',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'fade-in': 'fadeIn 0.6s ease-in',
                    },
                    keyframes: {
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(139, 92, 246, 0.5)' },
                            '100%': { boxShadow: '0 0 40px rgba(139, 92, 246, 0.8), 0 0 60px rgba(236, 72, 153, 0.5)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateX(-100%)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                    }
                }
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #020202;
        }
        
        .dark-gradient {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
        }
        
        .neon-border {
            border: 2px solid transparent;
            background-image: linear-gradient(#1a1a1a, #1a1a1a), linear-gradient(135deg, #8b5cf6, #ec4899);
            background-origin: border-box;
            background-clip: padding-box, border-box;
        }
        
        .glow-card {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.1);
            transition: all 0.3s ease;
        }
        
        .glow-card:hover {
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 40px rgba(139, 92, 246, 0.3), 0 0 60px rgba(236, 72, 153, 0.2);
            transform: translateY(-5px);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #ec4899, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        .gradient-pink {
            background: linear-gradient(135deg, #ec4899, #db2777);
        }
        
        .gradient-blue {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        
        .gradient-green {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .neon-glow {
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.8), 0 0 20px rgba(139, 92, 246, 0.5);
        }
        
        .loading-spinner {
            border: 3px solid rgba(139, 92, 246, 0.3);
            border-top-color: #8b5cf6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .chat-scroll::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-scroll::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 10px;
        }
        
        .chat-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 10px;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
        }
        
        input[type="range"]::-webkit-slider-track {
            background: #1a1a1a;
            border-radius: 10px;
            height: 8px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }
        
        @keyframes particle-float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="dark-gradient min-h-screen text-white overflow-x-hidden" x-data="dashboardApp()" x-init="init()">
    
    <!-- Animated Background Particles -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="particle w-2 h-2 bg-purple-500 absolute top-1/4 left-1/4 animate-float" style="animation-delay: 0s;"></div>
        <div class="particle w-3 h-3 bg-pink-500 absolute top-3/4 left-3/4 animate-float" style="animation-delay: 1s;"></div>
        <div class="particle w-2 h-2 bg-blue-500 absolute top-1/2 left-1/2 animate-float" style="animation-delay: 2s;"></div>
    </div>

    <!-- Loading Overlay -->
    <div x-show="loading" class="fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center backdrop-blur-sm">
        <div class="glow-card rounded-3xl p-10 flex flex-col items-center space-y-6">
            <div class="loading-spinner"></div>
            <p class="text-xl font-bold gradient-text" x-text="loadingMessage"></p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="relative z-10 max-w-7xl mx-auto px-4 py-8">
        
        <!-- Header -->
        <div x-show="!isAuthenticated" class="text-center mb-12 animate-fade-in">
            <div class="inline-block mb-6 animate-float">
                <div class="text-8xl">ü§ñ</div>
            </div>
            <h1 class="text-5xl md:text-7xl font-black mb-4 gradient-text neon-glow">
                Personal AI Guidance System
            </h1>
            <p class="text-xl md:text-2xl text-gray-400 font-medium">
                Track, Analyze, and Improve Your Life with AI-Powered Insights üß†
            </p>
        </div>

        <!-- Auth Section -->
        <div x-show="!isAuthenticated" class="max-w-md mx-auto animate-slide-in">
            <div class="glow-card rounded-3xl p-8">
                <h2 class="text-3xl font-bold text-center mb-8 gradient-text">
                    Welcome Back!
                </h2>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-2">Username</label>
                        <input 
                            type="text" 
                            x-model="credentials.username"
                            @keyup.enter="login()"
                            class="w-full px-6 py-4 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white placeholder-gray-600"
                            placeholder="Enter your username"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-2">Password</label>
                        <input 
                            type="password" 
                            x-model="credentials.password"
                            @keyup.enter="login()"
                            class="w-full px-6 py-4 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white placeholder-gray-600"
                            placeholder="Enter your password"
                        />
                    </div>
                    
                    <div class="flex gap-4 pt-4">
                        <button 
                            @click="login()"
                            class="flex-1 gradient-purple text-white font-bold py-4 rounded-xl hover:opacity-90 transform hover:scale-105 transition-all shadow-lg shadow-purple-500/50"
                        >
                            üîê Login
                        </button>
                        <button 
                            @click="register()"
                            class="flex-1 bg-black border-2 border-purple-500 text-purple-400 font-bold py-4 rounded-xl hover:bg-purple-900/20 transform hover:scale-105 transition-all"
                        >
                            ‚ú® Register
                        </button>
                    </div>
                    
                    <!-- Quick Demo Login -->
                    <div class="text-center">
                        <p class="text-gray-500 text-sm mb-2">Quick Demo</p>
                        <button 
                            @click="credentials.username='Khan_umar'; credentials.password='test123'; login()"
                            class="text-purple-400 hover:text-purple-300 text-sm font-semibold underline transition-colors"
                        >
                            üëâ Login as Khan_umar (existing user)
                        </button>
                    </div>
                    
                    <div x-show="authMessage" 
                         x-text="authMessage"
                         :class="authError ? 'bg-red-900/30 text-red-400 border-red-500' : 'bg-green-900/30 text-green-400 border-green-500'"
                         class="p-4 rounded-xl border-2 text-center font-semibold animate-fade-in"
                    ></div>
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div x-show="isAuthenticated" x-cloak class="space-y-6 animate-fade-in">
            
            <!-- Welcome Header -->
            <div class="glow-card rounded-3xl p-6">
                <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                    <div>
                        <h2 class="text-4xl font-black gradient-text mb-2">
                            Welcome, <span x-text="credentials.username"></span>! üëã
                        </h2>
                        <p class="text-gray-400">Your personalized AI-powered dashboard</p>
                    </div>
                    <button 
                        @click="logout()"
                        class="px-8 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold transform hover:scale-105 transition-all shadow-lg shadow-red-500/50"
                    >
                        üö™ Logout
                    </button>
                </div>
            </div>

            <!-- Tabs -->
            <div class="glow-card rounded-3xl p-2">
                <div class="grid grid-cols-2 md:grid-cols-5 gap-2">
                    <button 
                        @click="currentTab = 'overview'"
                        :class="currentTab === 'overview' ? 'gradient-purple text-white shadow-lg shadow-purple-500/50 scale-105' : 'bg-black text-gray-400 hover:text-white hover:bg-gray-900'"
                        class="py-4 px-6 rounded-2xl font-bold transition-all transform"
                    >
                        üìä Overview
                    </button>
                    <button 
                        @click="currentTab = 'track'"
                        :class="currentTab === 'track' ? 'gradient-purple text-white shadow-lg shadow-purple-500/50 scale-105' : 'bg-black text-gray-400 hover:text-white hover:bg-gray-900'"
                        class="py-4 px-6 rounded-2xl font-bold transition-all transform"
                    >
                        üìù Track
                    </button>
                    <button 
                        @click="currentTab = 'analytics'; loadAnalytics()"
                        :class="currentTab === 'analytics' ? 'gradient-purple text-white shadow-lg shadow-purple-500/50 scale-105' : 'bg-black text-gray-400 hover:text-white hover:bg-gray-900'"
                        class="py-4 px-6 rounded-2xl font-bold transition-all transform"
                    >
                        üìà Analytics
                    </button>
                    <button 
                        @click="currentTab = 'brain'; loadBrainSummary()"
                        :class="currentTab === 'brain' ? 'gradient-purple text-white shadow-lg shadow-purple-500/50 scale-105' : 'bg-black text-gray-400 hover:text-white hover:bg-gray-900'"
                        class="py-4 px-6 rounded-2xl font-bold transition-all transform"
                    >
                        üß† AI Brain
                    </button>
                    <button 
                        @click="currentTab = 'chat'"
                        :class="currentTab === 'chat' ? 'gradient-purple text-white shadow-lg shadow-purple-500/50 scale-105' : 'bg-black text-gray-400 hover:text-white hover:bg-gray-900'"
                        class="py-4 px-6 rounded-2xl font-bold transition-all transform"
                    >
                        üí¨ Chat
                    </button>
                </div>
            </div>

            <!-- Overview Tab -->
            <div x-show="currentTab === 'overview'" class="space-y-6">
                <!-- Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="glow-card rounded-3xl p-6 text-center animate-glow">
                        <div class="text-6xl mb-4 animate-float">üò¥</div>
                        <div class="text-5xl font-black gradient-text mb-2" x-text="stats.avgSleep || '--'"></div>
                        <div class="text-gray-400 font-semibold">Avg Sleep (hours)</div>
                    </div>
                    
                    <div class="glow-card rounded-3xl p-6 text-center animate-glow" style="animation-delay: 0.2s;">
                        <div class="text-6xl mb-4 animate-float" style="animation-delay: 0.5s;">üèÉ</div>
                        <div class="text-5xl font-black gradient-text mb-2" x-text="stats.avgExercise || '--'"></div>
                        <div class="text-gray-400 font-semibold">Avg Exercise (min)</div>
                    </div>
                    
                    <div class="glow-card rounded-3xl p-6 text-center animate-glow" style="animation-delay: 0.4s;">
                        <div class="text-6xl mb-4 animate-float" style="animation-delay: 1s;">‚úÖ</div>
                        <div class="text-5xl font-black gradient-text mb-2" x-text="stats.taskCompletion || '--'"></div>
                        <div class="text-gray-400 font-semibold">Task Completion</div>
                    </div>
                    
                    <div class="glow-card rounded-3xl p-6 text-center animate-glow" style="animation-delay: 0.6s;">
                        <div class="text-6xl mb-4 animate-float" style="animation-delay: 1.5s;">üòä</div>
                        <div class="text-5xl font-black gradient-text mb-2" x-text="stats.avgMood || '--'"></div>
                        <div class="text-gray-400 font-semibold">Avg Happiness</div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Sleep & Exercise Chart -->
                    <div class="glow-card rounded-3xl p-8 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-purple-600/10 to-pink-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-black gradient-text flex items-center">
                                    <span class="text-4xl mr-4 animate-float">üìä</span>
                                    <span>Sleep & Exercise Trends</span>
                                </h3>
                                <div class="px-4 py-2 bg-purple-900/50 rounded-full text-purple-300 text-sm font-bold border border-purple-500/30">
                                    Last 30 Days
                                </div>
                            </div>
                            <div class="h-80 bg-black/30 rounded-2xl p-4 border border-purple-900/30">
                                <canvas id="sleepExerciseChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Productivity Chart -->
                    <div class="glow-card rounded-3xl p-8 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 to-cyan-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-black gradient-text flex items-center">
                                    <span class="text-4xl mr-4 animate-float" style="animation-delay: 0.3s;">üéØ</span>
                                    <span>Productivity Overview</span>
                                </h3>
                                <div class="px-4 py-2 bg-blue-900/50 rounded-full text-blue-300 text-sm font-bold border border-blue-500/30">
                                    Tasks Flow
                                </div>
                            </div>
                            <div class="h-80 bg-black/30 rounded-2xl p-4 border border-blue-900/30">
                                <canvas id="productivityChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mood Tracking Chart -->
                    <div class="glow-card rounded-3xl p-8 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-pink-600/10 to-rose-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-black gradient-text flex items-center">
                                    <span class="text-4xl mr-4 animate-float" style="animation-delay: 0.6s;">üòä</span>
                                    <span>Mood Tracking</span>
                                </h3>
                                <div class="px-4 py-2 bg-pink-900/50 rounded-full text-pink-300 text-sm font-bold border border-pink-500/30">
                                    Emotional State
                                </div>
                            </div>
                            <div class="h-80 bg-black/30 rounded-2xl p-4 border border-pink-900/30">
                                <canvas id="moodChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Daily Habits Chart -->
                    <div class="glow-card rounded-3xl p-8 relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-green-600/10 to-emerald-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-black gradient-text flex items-center">
                                    <span class="text-4xl mr-4 animate-float" style="animation-delay: 0.9s;">üìö</span>
                                    <span>Daily Habits</span>
                                </h3>
                                <div class="px-4 py-2 bg-green-900/50 rounded-full text-green-300 text-sm font-bold border border-green-500/30">
                                    Distribution
                                </div>
                            </div>
                            <div class="h-80 bg-black/30 rounded-2xl p-4 border border-green-900/30">
                                <canvas id="habitsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Track Tab -->
            <div x-show="currentTab === 'track'" class="space-y-6">
                <div class="glow-card rounded-3xl p-8">
                    <h3 class="text-3xl font-black gradient-text mb-8">üìù Log Your Daily Data</h3>
                    
                    <!-- Habits -->
                    <div class="mb-10">
                        <h4 class="text-2xl font-bold text-purple-400 mb-6 flex items-center">
                            <span class="text-3xl mr-3">üèÉ</span> Habits
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Date</label>
                                <input type="date" x-model="habitLog.date" class="w-full px-4 py-3 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Sleep Hours</label>
                                <input type="number" x-model="habitLog.sleep_hours" step="0.5" class="w-full px-4 py-3 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Exercise (min)</label>
                                <input type="number" x-model="habitLog.exercise_minutes" class="w-full px-4 py-3 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Reading (min)</label>
                                <input type="number" x-model="habitLog.reading_minutes" class="w-full px-4 py-3 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Meditation (min)</label>
                                <input type="number" x-model="habitLog.meditation_minutes" class="w-full px-4 py-3 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Social Media (min)</label>
                                <input type="number" x-model="habitLog.social_media_minutes" class="w-full px-4 py-3 bg-black border-2 border-purple-900 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white">
                            </div>
                        </div>
                        <button @click="saveHabits()" class="mt-6 gradient-purple text-white font-bold py-4 px-10 rounded-xl hover:opacity-90 transform hover:scale-105 transition-all shadow-lg shadow-purple-500/50">
                            üíæ Save Habits
                        </button>
                    </div>

                    <!-- Productivity -->
                    <div class="mb-10">
                        <h4 class="text-2xl font-bold text-blue-400 mb-6 flex items-center">
                            <span class="text-3xl mr-3">üìä</span> Productivity
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Date</label>
                                <input type="date" x-model="productivityLog.date" class="w-full px-4 py-3 bg-black border-2 border-blue-900 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Tasks Planned</label>
                                <input type="number" x-model="productivityLog.tasks_planned" class="w-full px-4 py-3 bg-black border-2 border-blue-900 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Tasks Completed</label>
                                <input type="number" x-model="productivityLog.tasks_completed" class="w-full px-4 py-3 bg-black border-2 border-blue-900 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Focus Time (min)</label>
                                <input type="number" x-model="productivityLog.focus_time_minutes" class="w-full px-4 py-3 bg-black border-2 border-blue-900 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all outline-none text-white">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Productivity Score (1-10)</label>
                                <input type="number" x-model="productivityLog.productivity_score" min="1" max="10" class="w-full px-4 py-3 bg-black border-2 border-blue-900 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all outline-none text-white">
                            </div>
                        </div>
                        <button @click="saveProductivity()" class="mt-6 gradient-blue text-white font-bold py-4 px-10 rounded-xl hover:opacity-90 transform hover:scale-105 transition-all shadow-lg shadow-blue-500/50">
                            üíæ Save Productivity
                        </button>
                    </div>

                    <!-- Mood -->
                    <div>
                        <h4 class="text-2xl font-bold text-pink-400 mb-6 flex items-center">
                            <span class="text-3xl mr-3">üòä</span> Mood Tracking
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Stress Level</label>
                                <input type="range" x-model="moodLog.stress_level" min="1" max="10" class="w-full">
                                <div class="text-center text-3xl font-black gradient-text mt-2" x-text="moodLog.stress_level"></div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Happiness Level</label>
                                <input type="range" x-model="moodLog.happiness_level" min="1" max="10" class="w-full">
                                <div class="text-center text-3xl font-black gradient-text mt-2" x-text="moodLog.happiness_level"></div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Energy Level</label>
                                <input type="range" x-model="moodLog.energy_level" min="1" max="10" class="w-full">
                                <div class="text-center text-3xl font-black gradient-text mt-2" x-text="moodLog.energy_level"></div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Motivation Level</label>
                                <input type="range" x-model="moodLog.motivation_level" min="1" max="10" class="w-full">
                                <div class="text-center text-3xl font-black gradient-text mt-2" x-text="moodLog.motivation_level"></div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-400 mb-2">Anxiety Level</label>
                                <input type="range" x-model="moodLog.anxiety_level" min="1" max="10" class="w-full">
                                <div class="text-center text-3xl font-black gradient-text mt-2" x-text="moodLog.anxiety_level"></div>
                            </div>
                        </div>
                        <button @click="saveMood()" class="mt-6 gradient-pink text-white font-bold py-4 px-10 rounded-xl hover:opacity-90 transform hover:scale-105 transition-all shadow-lg shadow-pink-500/50">
                            üíæ Save Mood
                        </button>
                    </div>

                    <div x-show="trackMessage" 
                         x-text="trackMessage"
                         :class="trackError ? 'bg-red-900/30 text-red-400 border-red-500' : 'bg-green-900/30 text-green-400 border-green-500'"
                         class="mt-8 p-4 rounded-xl border-2 text-center font-bold animate-fade-in"
                    ></div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div x-show="currentTab === 'analytics'" class="space-y-6">
                <div class="glow-card rounded-3xl p-8">
                    <h3 class="text-3xl font-black gradient-text mb-6">üìà Habit Analytics</h3>
                    <div id="analyticsContent" class="space-y-6"></div>
                </div>
            </div>

            <!-- Brain Tab -->
            <div x-show="currentTab === 'brain'" class="space-y-6">
                <div class="glow-card rounded-3xl p-8">
                    <h3 class="text-3xl font-black gradient-text mb-8 flex items-center">
                        <span class="text-5xl mr-4 animate-float">üß†</span> Your Personal AI Brain
                    </h3>
                    <div id="brainSummary" class="space-y-6"></div>
                </div>
                
                <div class="glow-card rounded-3xl p-8">
                    <h3 class="text-3xl font-black gradient-text mb-6">üí° AI Recommendations</h3>
                    <div id="recommendationsContent" class="space-y-4"></div>
                </div>
            </div>

            <!-- Chat Tab -->
            <div x-show="currentTab === 'chat'">
                <div class="glow-card rounded-3xl p-8 h-[700px] flex flex-col">
                    <h3 class="text-3xl font-black gradient-text mb-6 flex items-center">
                        <span class="text-4xl mr-4">üí¨</span> Chat with Your AI Brain
                    </h3>
                    
                    <div class="flex-1 bg-gradient-to-br from-black to-gray-900 rounded-3xl p-6 mb-6 overflow-y-auto chat-scroll border-2 border-purple-900/50" id="chatMessages">
                        <div class="text-center text-gray-600 py-10">
                            <div class="text-6xl mb-4 animate-float">ü§ñ</div>
                            <p class="text-lg">Start chatting to get personalized AI insights...</p>
                        </div>
                    </div>
                    
                    <div class="flex gap-4">
                        <input 
                            type="text" 
                            x-model="chatInput"
                            @keyup.enter="sendMessage()"
                            placeholder="Ask me anything about your habits, goals, or get motivation..."
                            class="flex-1 px-6 py-4 bg-black border-2 border-purple-900 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all outline-none text-white placeholder-gray-600"
                        />
                        <button 
                            @click="sendMessage()"
                            class="gradient-purple text-white font-bold py-4 px-10 rounded-2xl hover:opacity-90 transform hover:scale-105 transition-all shadow-lg shadow-purple-500/50"
                        >
                            Send üöÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function dashboardApp() {
            return {
                API_URL: window.location.hostname === 'localhost' 
                    ? 'http://localhost:8000' 
                    : window.location.protocol + '//' + window.location.hostname.replace('-8080', '-8000'),
                
                loading: false,
                loadingMessage: 'Loading...',
                isAuthenticated: false,
                token: null,
                currentTab: 'overview',
                
                credentials: { username: '', password: '' },
                authMessage: '',
                authError: false,
                trackMessage: '',
                trackError: false,
                
                stats: {
                    avgSleep: '--',
                    avgExercise: '--',
                    taskCompletion: '--',
                    avgMood: '--'
                },
                
                habitLog: {
                    date: new Date().toISOString().split('T')[0],
                    sleep_hours: null,
                    exercise_minutes: 0,
                    reading_minutes: 0,
                    meditation_minutes: 0,
                    social_media_minutes: 0
                },
                
                productivityLog: {
                    date: new Date().toISOString().split('T')[0],
                    tasks_planned: 0,
                    tasks_completed: 0,
                    focus_time_minutes: 0,
                    productivity_score: null
                },
                
                moodLog: {
                    stress_level: 5,
                    happiness_level: 5,
                    energy_level: 5,
                    motivation_level: 5,
                    anxiety_level: 5
                },
                
                chatInput: '',
                charts: {},
                
                init() {
                    console.log('API URL:', this.API_URL);
                    
                    // Check for saved token in localStorage
                    const savedToken = localStorage.getItem('ai_guidance_token');
                    const savedUsername = localStorage.getItem('ai_guidance_username');
                    
                    if (savedToken && savedUsername) {
                        this.token = savedToken;
                        this.credentials.username = savedUsername;
                        this.isAuthenticated = true;
                        this.loadDashboard();
                    }
                },
                
                async register() {
                    this.loading = true;
                    this.loadingMessage = 'Creating your account...';
                    
                    try {
                        const response = await fetch(`${this.API_URL}/register`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(this.credentials)
                        });
                        
                        if (response.ok) {
                            this.authMessage = '‚úÖ Registered successfully! Now login.';
                            this.authError = false;
                        } else {
                            const error = await response.json();
                            this.authMessage = `‚ùå ${error.detail}`;
                            this.authError = true;
                        }
                    } catch (error) {
                        this.authMessage = `‚ùå Error: ${error.message}`;
                        this.authError = true;
                    } finally {
                        this.loading = false;
                    }
                },
                
                async login() {
                    this.loading = true;
                    this.loadingMessage = 'Logging in...';
                    
                    try {
                        const formData = new URLSearchParams();
                        formData.append('username', this.credentials.username);
                        formData.append('password', this.credentials.password);
                        
                        const response = await fetch(`${this.API_URL}/token`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                            body: formData
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            this.token = data.access_token;
                            this.isAuthenticated = true;
                            this.authMessage = '';
                            
                            // Save to localStorage
                            localStorage.setItem('ai_guidance_token', data.access_token);
                            localStorage.setItem('ai_guidance_username', this.credentials.username);
                            
                            await this.loadDashboard();
                        } else {
                            const error = await response.json();
                            this.authMessage = `‚ùå ${error.detail}`;
                            this.authError = true;
                        }
                    } catch (error) {
                        this.authMessage = `‚ùå Error: ${error.message}`;
                        this.authError = true;
                    } finally {
                        this.loading = false;
                    }
                },
                
                logout() {
                    this.isAuthenticated = false;
                    this.token = null;
                    this.credentials = { username: '', password: '' };
                    
                    // Clear localStorage
                    localStorage.removeItem('ai_guidance_token');
                    localStorage.removeItem('ai_guidance_username');
                },
                
                async loadDashboard() {
                    this.loading = true;
                    this.loadingMessage = 'Loading your data...';
                    await Promise.all([this.loadStats(), this.loadCharts()]);
                    this.loading = false;
                },
                
                async loadStats() {
                    try {
                        const [habits, productivity, mood] = await Promise.all([
                            fetch(`${this.API_URL}/habits?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json()),
                            fetch(`${this.API_URL}/productivity?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json()),
                            fetch(`${this.API_URL}/mood?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json())
                        ]);
                        
                        if (habits.length > 0) {
                            this.stats.avgSleep = (habits.reduce((sum, h) => sum + (h.sleep_hours || 0), 0) / habits.length).toFixed(1);
                            this.stats.avgExercise = Math.round(habits.reduce((sum, h) => sum + (h.exercise_minutes || 0), 0) / habits.length);
                        }
                        
                        if (productivity.length > 0) {
                            const total = productivity.reduce((sum, p) => sum + p.tasks_planned, 0);
                            const completed = productivity.reduce((sum, p) => sum + p.tasks_completed, 0);
                            this.stats.taskCompletion = `${total > 0 ? (completed / total * 100).toFixed(0) : 0}%`;
                        }
                        
                        if (mood.length > 0) {
                            this.stats.avgMood = (mood.reduce((sum, m) => sum + m.happiness_level, 0) / mood.length).toFixed(1);
                        }
                    } catch (error) {
                        console.error('Error loading stats:', error);
                    }
                },
                
                async loadCharts() {
                    try {
                        const [habits, productivity, mood] = await Promise.all([
                            fetch(`${this.API_URL}/habits?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json()),
                            fetch(`${this.API_URL}/productivity?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json()),
                            fetch(`${this.API_URL}/mood?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json())
                        ]);

                        // Chart.js global config for dark theme
                        Chart.defaults.color = '#9ca3af';
                        Chart.defaults.borderColor = 'rgba(139, 92, 246, 0.2)';

                        // Sleep & Exercise Chart
                        const sleepExerciseData = {
                            labels: habits.map(h => new Date(h.date).toLocaleDateString()).reverse(),
                            datasets: [
                                {
                                    label: 'üò¥ Sleep Hours',
                                    data: habits.map(h => h.sleep_hours).reverse(),
                                    borderColor: '#8b5cf6',
                                    backgroundColor: 'rgba(139, 92, 246, 0.2)',
                                    borderWidth: 3,
                                    tension: 0.4,
                                    fill: true,
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'üèÉ Exercise (min)',
                                    data: habits.map(h => h.exercise_minutes).reverse(),
                                    borderColor: '#ec4899',
                                    backgroundColor: 'rgba(236, 72, 153, 0.2)',
                                    borderWidth: 3,
                                    tension: 0.4,
                                    fill: true,
                                    yAxisID: 'y1'
                                }
                            ]
                        };

                        if (this.charts.sleepExercise) this.charts.sleepExercise.destroy();
                        this.charts.sleepExercise = new Chart(document.getElementById('sleepExerciseChart'), {
                            type: 'line',
                            data: sleepExerciseData,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        position: 'top',
                                        labels: {
                                            color: '#fff',
                                            font: { size: 14, weight: 'bold' },
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                        titleColor: '#8b5cf6',
                                        bodyColor: '#fff',
                                        borderColor: '#8b5cf6',
                                        borderWidth: 2,
                                        padding: 12,
                                        displayColors: true
                                    }
                                },
                                scales: {
                                    y: {
                                        type: 'linear',
                                        display: true,
                                        position: 'left',
                                        title: { display: true, text: 'Hours', color: '#8b5cf6', font: { weight: 'bold' } },
                                        grid: { color: 'rgba(139, 92, 246, 0.1)' },
                                        ticks: { color: '#8b5cf6' }
                                    },
                                    y1: {
                                        type: 'linear',
                                        display: true,
                                        position: 'right',
                                        title: { display: true, text: 'Minutes', color: '#ec4899', font: { weight: 'bold' } },
                                        grid: { drawOnChartArea: false, color: 'rgba(236, 72, 153, 0.1)' },
                                        ticks: { color: '#ec4899' }
                                    },
                                    x: {
                                        grid: { color: 'rgba(156, 163, 175, 0.1)' },
                                        ticks: { color: '#9ca3af' }
                                    }
                                }
                            }
                        });

                        // Productivity Chart
                        const productivityData = {
                            labels: productivity.map(p => new Date(p.date).toLocaleDateString()).reverse(),
                            datasets: [
                                {
                                    label: 'üìã Tasks Planned',
                                    data: productivity.map(p => p.tasks_planned).reverse(),
                                    backgroundColor: 'rgba(59, 130, 246, 0.6)',
                                    borderColor: '#3b82f6',
                                    borderWidth: 2,
                                    borderRadius: 8
                                },
                                {
                                    label: '‚úÖ Tasks Completed',
                                    data: productivity.map(p => p.tasks_completed).reverse(),
                                    backgroundColor: 'rgba(16, 185, 129, 0.6)',
                                    borderColor: '#10b981',
                                    borderWidth: 2,
                                    borderRadius: 8
                                }
                            ]
                        };

                        if (this.charts.productivity) this.charts.productivity.destroy();
                        this.charts.productivity = new Chart(document.getElementById('productivityChart'), {
                            type: 'bar',
                            data: productivityData,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        labels: {
                                            color: '#fff',
                                            font: { size: 14, weight: 'bold' },
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                        titleColor: '#3b82f6',
                                        bodyColor: '#fff',
                                        borderColor: '#3b82f6',
                                        borderWidth: 2,
                                        padding: 12
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        grid: { color: 'rgba(59, 130, 246, 0.1)' },
                                        ticks: { color: '#3b82f6', font: { weight: 'bold' } }
                                    },
                                    x: {
                                        grid: { color: 'rgba(156, 163, 175, 0.1)' },
                                        ticks: { color: '#9ca3af' }
                                    }
                                }
                            }
                        });

                        // Mood Chart
                        const moodData = {
                            labels: mood.map(m => new Date(m.timestamp).toLocaleDateString()).reverse(),
                            datasets: [
                                {
                                    label: 'üòä Happiness',
                                    data: mood.map(m => m.happiness_level).reverse(),
                                    borderColor: '#10b981',
                                    backgroundColor: 'rgba(16, 185, 129, 0.2)',
                                    borderWidth: 3,
                                    tension: 0.4,
                                    fill: true
                                },
                                {
                                    label: 'üò∞ Stress',
                                    data: mood.map(m => m.stress_level).reverse(),
                                    borderColor: '#ef4444',
                                    backgroundColor: 'rgba(239, 68, 68, 0.2)',
                                    borderWidth: 3,
                                    tension: 0.4,
                                    fill: true
                                },
                                {
                                    label: '‚ö° Energy',
                                    data: mood.map(m => m.energy_level).reverse(),
                                    borderColor: '#f59e0b',
                                    backgroundColor: 'rgba(245, 158, 11, 0.2)',
                                    borderWidth: 3,
                                    tension: 0.4,
                                    fill: true
                                }
                            ]
                        };

                        if (this.charts.mood) this.charts.mood.destroy();
                        this.charts.mood = new Chart(document.getElementById('moodChart'), {
                            type: 'line',
                            data: moodData,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        labels: {
                                            color: '#fff',
                                            font: { size: 14, weight: 'bold' },
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                        titleColor: '#ec4899',
                                        bodyColor: '#fff',
                                        borderColor: '#ec4899',
                                        borderWidth: 2,
                                        padding: 12
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        max: 10,
                                        grid: { color: 'rgba(236, 72, 153, 0.1)' },
                                        ticks: { color: '#ec4899', font: { weight: 'bold' } }
                                    },
                                    x: {
                                        grid: { color: 'rgba(156, 163, 175, 0.1)' },
                                        ticks: { color: '#9ca3af' }
                                    }
                                }
                            }
                        });

                        // Habits Doughnut Chart
                        const avgHabits = {
                            reading: habits.reduce((sum, h) => sum + (h.reading_minutes || 0), 0) / habits.length || 0,
                            meditation: habits.reduce((sum, h) => sum + (h.meditation_minutes || 0), 0) / habits.length || 0,
                            socialMedia: habits.reduce((sum, h) => sum + (h.social_media_minutes || 0), 0) / habits.length || 0
                        };

                        if (this.charts.habits) this.charts.habits.destroy();
                        this.charts.habits = new Chart(document.getElementById('habitsChart'), {
                            type: 'doughnut',
                            data: {
                                labels: ['üìö Reading', 'üßò Meditation', 'üì± Social Media'],
                                datasets: [{
                                    data: [avgHabits.reading, avgHabits.meditation, avgHabits.socialMedia],
                                    backgroundColor: [
                                        'rgba(139, 92, 246, 0.8)',
                                        'rgba(16, 185, 129, 0.8)',
                                        'rgba(245, 158, 11, 0.8)'
                                    ],
                                    borderColor: [
                                        '#8b5cf6',
                                        '#10b981',
                                        '#f59e0b'
                                    ],
                                    borderWidth: 3,
                                    hoverOffset: 15
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        position: 'bottom',
                                        labels: {
                                            color: '#fff',
                                            font: { size: 14, weight: 'bold' },
                                            padding: 20
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                        titleColor: '#8b5cf6',
                                        bodyColor: '#fff',
                                        borderColor: '#8b5cf6',
                                        borderWidth: 2,
                                        padding: 12,
                                        callbacks: {
                                            label: function(context) {
                                                return context.label + ': ' + Math.round(context.parsed) + ' min/day';
                                            }
                                        }
                                    }
                                }
                            }
                        });

                    } catch (error) {
                        console.error('Error loading charts:', error);
                    }
                },
                
                async loadBrainSummary() {
                    try {
                        const response = await fetch(`${this.API_URL}/brain/summary`, {
                            headers: { 'Authorization': `Bearer ${this.token}` }
                        });
                        
                        if (response.ok) {
                            const brain = await response.json();
                            document.getElementById('brainSummary').innerHTML = `
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="bg-purple-900/30 rounded-2xl p-6 border-2 border-purple-500/50">
                                        <div class="text-5xl font-black gradient-text">${brain.data_points}</div>
                                        <div class="text-gray-400 font-bold mt-2">Data Points Learned</div>
                                    </div>
                                    <div class="bg-blue-900/30 rounded-2xl p-6 border-2 border-blue-500/50">
                                        <div class="text-5xl font-black gradient-text">${brain.habits_tracked}</div>
                                        <div class="text-gray-400 font-bold mt-2">Habits Tracked</div>
                                    </div>
                                    <div class="bg-pink-900/30 rounded-2xl p-6 border-2 border-pink-500/50">
                                        <div class="text-5xl font-black gradient-text">${brain.conversations}</div>
                                        <div class="text-gray-400 font-bold mt-2">Conversations</div>
                                    </div>
                                </div>
                                <div class="mt-6 p-6 bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-2xl border-2 border-purple-500/30">
                                    <h4 class="font-black text-xl gradient-text mb-4">üß† Brain Insights:</h4>
                                    <pre class="text-sm text-gray-400 whitespace-pre-wrap font-mono">${JSON.stringify(brain.behavior_insights, null, 2)}</pre>
                                </div>
                            `;
                        }
                    } catch (error) {
                        console.error('Error loading brain:', error);
                    }
                },
                
                async loadAnalytics() {
                    try {
                        const [habits, productivity, mood] = await Promise.all([
                            fetch(`${this.API_URL}/habits?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json()),
                            fetch(`${this.API_URL}/productivity?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json()),
                            fetch(`${this.API_URL}/mood?limit=30`, {
                                headers: { 'Authorization': `Bearer ${this.token}` }
                            }).then(r => r.json())
                        ]);

                        // Calculate statistics
                        const avgSleep = habits.length > 0 
                            ? (habits.reduce((sum, h) => sum + (h.sleep_hours || 0), 0) / habits.length).toFixed(1) 
                            : 0;
                        const avgExercise = habits.length > 0 
                            ? Math.round(habits.reduce((sum, h) => sum + (h.exercise_minutes || 0), 0) / habits.length) 
                            : 0;
                        const avgReading = habits.length > 0 
                            ? Math.round(habits.reduce((sum, h) => sum + (h.reading_minutes || 0), 0) / habits.length) 
                            : 0;
                        const avgMeditation = habits.length > 0 
                            ? Math.round(habits.reduce((sum, h) => sum + (h.meditation_minutes || 0), 0) / habits.length) 
                            : 0;
                        
                        const avgHappiness = mood.length > 0 
                            ? (mood.reduce((sum, m) => sum + (m.happiness_level || 0), 0) / mood.length).toFixed(1) 
                            : 0;
                        const avgStress = mood.length > 0 
                            ? (mood.reduce((sum, m) => sum + (m.stress_level || 0), 0) / mood.length).toFixed(1) 
                            : 0;
                        const avgEnergy = mood.length > 0 
                            ? (mood.reduce((sum, m) => sum + (m.energy_level || 0), 0) / mood.length).toFixed(1) 
                            : 0;

                        const totalTasksPlanned = productivity.reduce((sum, p) => sum + (p.tasks_planned || 0), 0);
                        const totalTasksCompleted = productivity.reduce((sum, p) => sum + (p.tasks_completed || 0), 0);
                        const completionRate = totalTasksPlanned > 0 
                            ? Math.round((totalTasksCompleted / totalTasksPlanned) * 100) 
                            : 0;

                        document.getElementById('analyticsContent').innerHTML = `
                            <div class="space-y-8">
                                <!-- Sleep & Exercise Stats -->
                                <div>
                                    <h4 class="text-2xl font-black gradient-text mb-4 flex items-center">
                                        <span class="text-3xl mr-3">üò¥</span> Sleep & Exercise
                                    </h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="bg-purple-900/30 rounded-2xl p-6 border-2 border-purple-500/50">
                                            <div class="text-5xl font-black text-purple-400">${avgSleep}h</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Sleep/Night</div>
                                        </div>
                                        <div class="bg-pink-900/30 rounded-2xl p-6 border-2 border-pink-500/50">
                                            <div class="text-5xl font-black text-pink-400">${avgExercise}m</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Exercise/Day</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Productivity Stats -->
                                <div>
                                    <h4 class="text-2xl font-black gradient-text mb-4 flex items-center">
                                        <span class="text-3xl mr-3">üìã</span> Productivity
                                    </h4>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div class="bg-blue-900/30 rounded-2xl p-6 border-2 border-blue-500/50">
                                            <div class="text-5xl font-black text-blue-400">${totalTasksPlanned}</div>
                                            <div class="text-gray-400 font-bold mt-2">Tasks Planned</div>
                                        </div>
                                        <div class="bg-green-900/30 rounded-2xl p-6 border-2 border-green-500/50">
                                            <div class="text-5xl font-black text-green-400">${totalTasksCompleted}</div>
                                            <div class="text-gray-400 font-bold mt-2">Tasks Completed</div>
                                        </div>
                                        <div class="bg-gradient-to-br from-blue-900/30 to-green-900/30 rounded-2xl p-6 border-2 border-cyan-500/50">
                                            <div class="text-5xl font-black text-cyan-400">${completionRate}%</div>
                                            <div class="text-gray-400 font-bold mt-2">Completion Rate</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Mood Stats -->
                                <div>
                                    <h4 class="text-2xl font-black gradient-text mb-4 flex items-center">
                                        <span class="text-3xl mr-3">üòä</span> Emotional State
                                    </h4>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div class="bg-green-900/30 rounded-2xl p-6 border-2 border-green-500/50">
                                            <div class="text-5xl font-black text-green-400">${avgHappiness}/10</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Happiness</div>
                                        </div>
                                        <div class="bg-red-900/30 rounded-2xl p-6 border-2 border-red-500/50">
                                            <div class="text-5xl font-black text-red-400">${avgStress}/10</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Stress</div>
                                        </div>
                                        <div class="bg-yellow-900/30 rounded-2xl p-6 border-2 border-yellow-500/50">
                                            <div class="text-5xl font-black text-yellow-400">${avgEnergy}/10</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Energy</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Habits Stats -->
                                <div>
                                    <h4 class="text-2xl font-black gradient-text mb-4 flex items-center">
                                        <span class="text-3xl mr-3">üìö</span> Daily Habits
                                    </h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="bg-purple-900/30 rounded-2xl p-6 border-2 border-purple-500/50">
                                            <div class="text-5xl font-black text-purple-400">${avgReading}m</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Reading/Day</div>
                                        </div>
                                        <div class="bg-emerald-900/30 rounded-2xl p-6 border-2 border-emerald-500/50">
                                            <div class="text-5xl font-black text-emerald-400">${avgMeditation}m</div>
                                            <div class="text-gray-400 font-bold mt-2">Avg Meditation/Day</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Insights -->
                                <div class="bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-2xl p-6 border-2 border-purple-500/30">
                                    <h4 class="font-black text-xl gradient-text mb-4">üí° Quick Insights:</h4>
                                    <ul class="space-y-2 text-gray-300">
                                        <li class="flex items-start">
                                            <span class="text-xl mr-2">‚úÖ</span>
                                            <span>You've tracked data for <strong class="text-purple-400">${habits.length} days</strong></span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-xl mr-2">${avgSleep >= 7 ? 'üåü' : '‚ö†Ô∏è'}</span>
                                            <span>Sleep: ${avgSleep >= 7 ? 'Great! Keep it up!' : 'Try to aim for 7+ hours'}</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-xl mr-2">${completionRate >= 70 ? 'üéØ' : 'üìà'}</span>
                                            <span>Productivity: ${completionRate >= 70 ? 'Excellent completion rate!' : 'Room for improvement'}</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-xl mr-2">${avgHappiness >= 7 ? 'üòä' : 'üå±'}</span>
                                            <span>Mood: ${avgHappiness >= 7 ? 'You\'re feeling great!' : 'Focus on self-care activities'}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        `;
                    } catch (error) {
                        console.error('Error loading analytics:', error);
                        document.getElementById('analyticsContent').innerHTML = `
                            <div class="text-center py-12">
                                <div class="text-6xl mb-4">üìä</div>
                                <p class="text-gray-400 text-lg">Start tracking your habits to see analytics!</p>
                            </div>
                        `;
                    }
                },
                
                async saveHabits() {
                    this.trackMessage = '';
                    try {
                        const response = await fetch(`${this.API_URL}/habits`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${this.token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                ...this.habitLog,
                                date: this.habitLog.date + 'T00:00:00'
                            })
                        });
                        
                        if (response.ok) {
                            this.trackMessage = '‚úÖ Habits logged! Your AI brain is learning...';
                            this.trackError = false;
                            await this.loadDashboard();
                        } else {
                            this.trackMessage = '‚ùå Failed to log habits';
                            this.trackError = true;
                        }
                    } catch (error) {
                        this.trackMessage = `‚ùå Error: ${error.message}`;
                        this.trackError = true;
                    }
                },
                
                async saveProductivity() {
                    this.trackMessage = '';
                    try {
                        const response = await fetch(`${this.API_URL}/productivity`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${this.token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                ...this.productivityLog,
                                date: this.productivityLog.date + 'T00:00:00'
                            })
                        });
                        
                        if (response.ok) {
                            this.trackMessage = '‚úÖ Productivity logged! Brain analyzing patterns...';
                            this.trackError = false;
                            await this.loadDashboard();
                        } else {
                            this.trackMessage = '‚ùå Failed to log productivity';
                            this.trackError = true;
                        }
                    } catch (error) {
                        this.trackMessage = `‚ùå Error: ${error.message}`;
                        this.trackError = true;
                    }
                },
                
                async saveMood() {
                    this.trackMessage = '';
                    try {
                        const response = await fetch(`${this.API_URL}/mood`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${this.token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.moodLog)
                        });
                        
                        if (response.ok) {
                            this.trackMessage = '‚úÖ Mood logged! Brain tracking emotional patterns...';
                            this.trackError = false;
                            await this.loadDashboard();
                        } else {
                            this.trackMessage = '‚ùå Failed to log mood';
                            this.trackError = true;
                        }
                    } catch (error) {
                        this.trackMessage = `‚ùå Error: ${error.message}`;
                        this.trackError = true;
                    }
                },
                
                async sendMessage() {
                    if (!this.chatInput.trim()) return;
                    
                    const messagesEl = document.getElementById('chatMessages');
                    messagesEl.innerHTML += `
                        <div class="flex justify-end mb-6 animate-fade-in">
                            <div class="gradient-purple rounded-3xl rounded-tr-md px-8 py-4 max-w-lg shadow-lg shadow-purple-500/30">
                                <p class="text-white font-medium">${this.chatInput}</p>
                            </div>
                        </div>
                    `;
                    
                    const userMessage = this.chatInput;
                    this.chatInput = '';
                    messagesEl.scrollTop = messagesEl.scrollHeight;
                    
                    try {
                        const response = await fetch(`${this.API_URL}/brain/chat`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${this.token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ message: userMessage })
                        });
                        
                        const data = await response.json();
                        messagesEl.innerHTML += `
                            <div class="flex justify-start mb-6 animate-fade-in">
                                <div class="bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-3xl rounded-tl-md px-8 py-4 max-w-lg border-2 border-purple-500/30 shadow-lg">
                                    <div class="flex items-center gap-3 mb-3">
                                        <span class="text-3xl animate-float">üß†</span>
                                        <span class="text-xs font-black gradient-text">BRAIN-POWERED AI</span>
                                    </div>
                                    <p class="text-white font-medium leading-relaxed">${data.response}</p>
                                </div>
                            </div>
                        `;
                        messagesEl.scrollTop = messagesEl.scrollHeight;
                    } catch (error) {
                        messagesEl.innerHTML += `
                            <div class="flex justify-start mb-6">
                                <div class="bg-red-900/30 rounded-3xl rounded-tl-md px-8 py-4 max-w-lg border-2 border-red-500/50">
                                    <p class="text-red-400 font-medium">Error: ${error.message}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            }
        }
    </script>
</body>
</html>
